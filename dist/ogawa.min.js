!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Ogawa=e():t.Ogawa=e()}(this,()=>(()=>{"use strict";var t={51(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.ANIMATE_OPTION_CONFIG=void 0,e.ANIMATE_OPTION_CONFIG={duration:{required:!0,validator:t=>"number"==typeof t&&t>0,description:"a positive number of milliseconds"},delay:{required:!1,default:0,validator:t=>"number"==typeof t&&t>=0,description:"a non-negative number of milliseconds"},draw:{required:!0,validator:t=>"function"==typeof t,description:"a function"},onComplete:{required:!1,default:void 0,validator:t=>"function"==typeof t||void 0===t,description:"a function"},onCancel:{required:!1,default:void 0,validator:t=>"function"==typeof t||void 0===t,description:"a function"},autoStart:{required:!1,default:!0,validator:t=>"boolean"==typeof t,description:"a boolean"}}},320(t,e,i){var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Directions=e.Ogawa=void 0;const r=o(i(961)),n=o(i(819)),s=i(732);Object.defineProperty(e,"Directions",{enumerable:!0,get:function(){return s.Directions}});const a=i(51);e.Ogawa=class{options;lastTimestamp=performance.now();progress=0;delayBuffer=0;requestId=null;_isRunning=new n.default(!1);direction=s.Directions.Forward;_isComplete=!1;constructor(t){this.options=(0,r.default)({optionConfig:a.ANIMATE_OPTION_CONFIG,userOptions:t,prefix:"[animate]:"}),this._isRunning.subscribe(this.onIsRunningChange),this.options.autoStart&&this.run()}run(){return this.direction=s.Directions.Forward,this._isRunning.value=!0,this}runReverse(){return this.direction=s.Directions.Backward,this._isRunning.value=!0,this}reset(){return this.progress=0,this.delayBuffer=0,this._isRunning.value=!1,null!==this.requestId&&(window.cancelAnimationFrame(this.requestId),this.requestId=null),this.options.draw(this.progress),this}pause(){return this._isRunning.value=!1,this}destroy(){return null!==this.requestId&&(window.cancelAnimationFrame(this.requestId),this.requestId=null),this._isRunning.reset(),this}get isComplete(){return this._isComplete}get isRunning(){return this._isRunning.value}tick=t=>{const e=t-this.lastTimestamp,i=e/this.options.duration*this.direction;this.delayBuffer<this.options.delay?this.delayBuffer+=e:(this.progress=Math.min(1,Math.max(0,this.progress+i)),this.options.draw(this.progress));(this.direction===s.Directions.Forward?1===this.progress:0===this.progress)?(this._isRunning.value=!1,this.direction===s.Directions.Forward&&"function"==typeof this.options.onComplete&&(this.options.onComplete(),this._isComplete=!0)):(this.lastTimestamp=t,this.requestId=window.requestAnimationFrame(this.tick))};onIsRunningChange=t=>{t?(this.lastTimestamp=performance.now(),this.requestId=window.requestAnimationFrame(this.tick)):("function"==typeof this.options.onCancel&&1!==this.progress&&0!==this.progress&&this.options.onCancel(this.progress),null!==this.requestId&&window.cancelAnimationFrame(this.requestId))}}},732(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Directions=void 0,e.Directions={Forward:1,Backward:-1}},819(t){function e(t){var e=function(t){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:e+""}t.exports=function(){function t(t){this.callbacks=[],this.internal=t,this.initialValue=t}var i,o,r=t.prototype;return r.subscribe=function(t){var e=this;if("function"!=typeof t)throw new TypeError("[createObservable]: expected callback to be a function.");return this.callbacks.push(t),function(){var i=e.callbacks.indexOf(t);e.callbacks=e.callbacks.slice(0,i).concat(e.callbacks.slice(i+1))}},r.reset=function(){this.callbacks=[],this.internal=this.initialValue},i=t,(o=[{key:"value",get:function(){return this.internal},set:function(t){if(t!==this.internal){var e=this.internal;this.internal=t;for(var i=0;i<this.callbacks.length;i++)this.callbacks[i](this.internal,e)}}}])&&function(t,i){for(var o=0;o<i.length;o++){var r=i[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,e(r.key),r)}}(i.prototype,o),Object.defineProperty(i,"prototype",{writable:!1}),i}()},961(t){function e(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function i(t){return null!==t&&"object"==typeof t&&!1===Array.isArray(t)}function o(t){var i=t.optionConfig,o=t.userOptions,r=void 0===o?{}:o,n=t.prefix,s=void 0===n?"":n,a=t.suffix,u=void 0===a?"":a,c=t.strict,l=void 0===c||c,d=function(t){return[s,t,u].join(" ")},f={};for(var p in i)if(e(i,p)){var h=i[p],v=h.required,g=h.default,b=h.description,y=h.validator,m=r[p],w=!!e(h,"required")&&("function"==typeof v?v(r):v),q=e(r,p),x=y(m,r);if(w){if(!q)throw new TypeError(d(p+" is required."));if(!x)throw new TypeError(d("Expected "+p+" to be "+b+", got "+typeof m+" "+m+"."));f[p]=m}else if(f[p]=g,q)if(x)f[p]=m;else{if(l)throw new TypeError(d("Expected "+p+" to be "+b+", got "+typeof m+" "+m+"."));console.warn(d("Expected "+p+" to be "+b+", got "+typeof m+" "+m+". Fallback to default value "+g+"."))}}return f}var r="[mergeOptions]:",n="\nCheck out documentation https://github.com/dubaua/merge-options#parameters-and-return";function s(t){throw new TypeError([r,t,n].join(" "))}var a={optionConfig:{required:!0,validator:function(t){for(var o in t)if(e(t,o)){var r=t[o];if(i(r)||s("Expected optionConfig."+o+" to be an object with declarative option configuration, got "+typeof r+" "+r+"."),e(r,"required")){var n=r.required,a=typeof n;"boolean"!==a&&"function"!==a&&s("Expected optionConfig."+o+".required to be either boolean or function, got "+typeof n+" "+n+".")}else e(r,"default")||s("Expected optionConfig."+o+" to either have required or default value.");if(e(r,"default")||e(r,"required")||s("Expected optionConfig."+o+" to either have required or default value."),e(r,"description")){var u=r.description;"string"!=typeof r.description&&s("Expected optionConfig."+o+".description to be a string, got "+typeof u+" "+u+".")}else s("Missing description on optionConfig."+o+" config.");if(e(r,"validator")){var c=r.validator;"function"!=typeof r.validator&&s("Expected optionConfig."+o+".validator to be a function, got "+typeof c+" "+c+".")}else s("Missing validator on optionConfig."+o+" config.")}return i(t)},description:"an object with declarative option configuration"},userOptions:{required:!1,default:{},validator:i,description:"an object"},prefix:{required:!1,default:"",validator:function(t){return"string"==typeof t},description:"a string"},suffix:{required:!1,default:"",validator:function(t){return"string"==typeof t},description:"a string"},strict:{required:!1,default:!0,validator:function(t){return"boolean"==typeof t},description:"a boolean"}};t.exports=function(t){var e=o({optionConfig:a,userOptions:t,prefix:r,suffix:n});return o(e)}}},e={};var i=function i(o){var r=e[o];if(void 0!==r)return r.exports;var n=e[o]={exports:{}};return t[o].call(n.exports,n,n.exports,i),n.exports}(320);return i})());
//# sourceMappingURL=ogawa.min.js.map